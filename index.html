<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="main.js"></script>
    <script src="storage.js"></script>
    <title>ToDoWebsite</title>
</head>
<body>
    <section id="top">
        <div>
            <p1 id="title">To Do List</p1>
        </div>
    </section>
    <main>
        <section id="main">
            <div id="maindiv">
                <div id="maintop">
                    <input id="textbox" type="text"/>
                    <button onclick='createToDo()' id='addbutton'>ADD</button>
                    <button onclick='removeToDo()' id='removebutton'>CLEAR (0)</button>
                </div>
                <div id="line"></div>
                <div id="mainbody">
                    <div id="buttondiv"></div>
                    <ul id="myList"></ul>
                </div>
            </div>
        </section>
    </main>
</body>
<script>
    // Declared universal variables
    const textbox = document.getElementById("textbox");
    const remb = document.getElementById('removebutton'); 

    // Html element savestate variables
    let lists = {
        id: 0, 
        class: '', 
        text: '', 
        ignore: false
    }
    let buttons = {
        id: 0, 
        class: '', 
        ignore: false
    }
    let listArray = []; 
    let buttonArray = []; 

    // Counter savestate variables
    let countersSaved = JSON.parse(localStorage.getItem("counters")); 
    let counters = {
        id: 1, 
        rcount:  0, 
        btnActive: [], 
        ignoreThese: [-1]
    }
    if (countersSaved != null) {
        counters = countersSaved; 
    }

    // Load arrays with existing localstorage to create counter of total local storage
    if (localStorage.getItem('list1') != null) {
        for (let i = 0; i < (counters.id - 1); i++) {
            listArray.push(localStorage.getItem(`list${i + 1}`)); 
            buttonArray.push(localStorage.getItem(`button${i + 1}`)); 
        }
    }

    ResetState(); 
    textEnter(); 
</script>
</html>